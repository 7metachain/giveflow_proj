# GiveFlow 测试页面故障排除指南

## ✅ 已修复的问题

### 1. 输入框字体颜色问题
**问题**: 输入框中的文字是透明的，看不到输入的内容
**修复**: 添加了明确的样式类
```css
text-gray-900 bg-white
```
现在所有输入框都有：
- 深灰色文字（text-gray-900��
- 白色背景（bg-white）
- 灰色边框（border-gray-300）
- 蓝色聚焦环（focus:ring-2 focus:ring-blue-500）

### 2. 改进的错误日志
**改进**: 添加了详细的日志输出，包括：
- 创建项目的详细信息（标题、金额、截止时间、受益人）
- 更详细的错误信息
- 常见错误的友好提示

## 🔍 常见错误及解决方案

### 错误 1: "User rejected transaction"
**原因**: 用户在钱包中取消了交易
**解决**:
- 重新点击"创建项目"按钮
- 在钱包弹窗中点击"确认"

### 错误 2: "Insufficient funds"
**原因**: 钱包余额不足
**解决**:
1. 检查钱包余额
2. 前往水龙头获取测试币：https://faucet.monad.xyz

### 错误 3: "Network mismatch"
**���因**: 钱包连接的网络不是 Monad Testnet
**解决**:
1. 打开 MetaMask
2. 切换到 Monad Testnet
3. 如果没有添加，手动添加：
   - Network Name: Monad Testnet
   - RPC URL: https://testnet-rpc.monad.xyz
   - Chain ID: 10143
   - Currency: MON

### 错误 4: "Transaction reverted"
**原因**: 合约执行失败
**可能的原因**:
1. 项目标题为空
2. 目标金额为 0
3. 截止时间已过
4. 合约地址错误

**解决**:
1. 检查表单填写是否完整
2. 确认截止时间在未来（默认 30 天后）
3. 查看操作日志中的详细错误信息

### 错误 5: "Campaign not found"
**原因**: 尝试向不存在的项目捐赠
**解决**:
1. 先创建项目
2. 等待交易确认（约 15 秒）
3. 点击"刷新数据"查看项目总数
4. 使用正确的项目 ID 进行捐赠

### 错误 6: 页面显示错误或崩溃
**原因**: 前端代码错误
**解决**:
1. 刷新浏览器页面（Ctrl+R 或 Cmd+R）
2. 清除浏览器缓存
3. 检查浏览器控制台（F12）的错误信息

## 📋 完整测试流程

### 步骤 1: 准备工作
1. ✅ 确保 MetaMask 已安装
2. ✅ 添加 Monad Testnet 到钱包
3. ✅ 获取测试币（从水龙头）
4. ✅ 切换到 Monad Testnet

### 步骤 2: 连接钱包
1. 打开测试页面：http://localhost:3000/test-contracts
2. 点击"连接钱包"
3. 在 MetaMask 中确认连接
4. 检查页面显示"✅ 已连接"

### 步骤 3: 创建项目
1. 填写项目信息（或使用默认值）
2. 点击"📝 创建项目"
3. 查看操作日志
4. 在 MetaMask 中确认交易
5. 等待交易确认（约 15 秒）
6. 查看日志显示"✅ 项目创建交易已提交！"
7. 3 秒后自动刷新项目数量

### 步骤 4: 查看项目
1. 检查"项目总数"是否增加
2. 输入项目 ID（如 1）
3. 点击"查询项目详情"
4. 查看项目信息显示在下方

### 步骤 5: 捐赠测试
1. 输入捐赠金额（建议 0.001 MON）
2. 点击"💰 向项目 X 捐赠"
3. 在 MetaMask 中确认交易
4. 等待确认
5. 查看操作日志

### 步骤 6: 批量捐赠（可选）
1. 确保有至少 2 个项目
2. 点击"⚡ 批量捐赠"
3. 体验并行执行优势

## 🐛 调试技巧

### 1. 查看浏览器控制台
```
按 F12 或右键 → 检查 → Console 标签
```

### 2. 查看操作日志
- 所有操作都会显示在右侧的"📝 操作日志"面板
- 绿色文字表示成功
- 红色文字表示错误
- 包含时间戳

### 3. 在 Monad Explorer 查看交易
```
https://testnet.monadexplorer.com/address/你的钱包地址
```

### 4. 检查合约状态
- CampaignRegistry: 0xe50e3B162a3671fc758FcD53766C95582DF63ebF
- BatchDonate: 0xBAB71010e46DDf7B9E183d2C57753842d3cC5118

## 📞 需要更多帮助？

如果以上方法都无法解决问题：

1. 截图错误信息
2. 复制操作日志
3. 检查浏览器控制台的完整错误堆栈
4. 在 Monad Explorer 查看交易状态

## ⚡ 快速修复命令

```bash
# 重启开发服务器
cd app
npm run dev

# 清除 Next.js 缓存
rm -rf .next
npm run dev
```

## 🎯 成功标志

当测试成功时，你应该看到：

1. ✅ 项目创建成功，项目数量增加
2. ✅ 能查询到项目详情
3. ✅ 捐赠交易成功
4. ✅ 已筹金额增加
5. ✅ 捐赠历史中有记录
6. ✅ Gas 费用很低（< 0.01 MON）

祝测试顺利！🎉
